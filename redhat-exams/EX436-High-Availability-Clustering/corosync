Corosync's Role in HA:
Cluster Membership: Corosync manages the membership of nodes in a cluster, ensuring that all nodes are aware of each other and can communicate effectively.

Messaging Layer: It provides a messaging layer that facilitates communication between cluster nodes. This is essential for coordinating actions and maintaining consistency across the cluster1.

Quorum Management: Corosync helps in maintaining quorum, which is a method to ensure that a majority of nodes agree on the state of the cluster before making any changes.

Failure Detection: It detects node failures and can trigger actions to handle these failures, such as restarting services or reassigning resources.

Integration with Resource Managers: Corosync works alongside resource managers like Pacemaker to manage and control the resources and services that need to be highly available.  


  1  cat /etc/redhat-release 
    2  yum update -y
    3  yum install epel-release -y
    4  reboot
    5  yum install pcs fence-agents-all
    6  yum install fence-agents-all
    7  yum install pcs fence-agents-all
    8  sudo yum install corosync pcsd
    9  sudo dnf install corosync pcsd
   10  yum config-manager --set-enabled highavailability
   11  yum install corosync pacemaker pcs -y
   12  reboot
   13  systemctl disable --now firewalld
   14  systemctl enable --now pcsd
   15  echo password | passwd --stdin hacluster
   16  clear
   17  pcs cluster auth node1-ha-lab-hpv2-R9 node2-ha-lab-hpv2-R9 node3-ha-lab-hpv2-R9
   18  pcs cluster auth node1-ha-lab-hpv2-R9 node2-ha-lab-hpv2-R9 node3-ha-lab-hpv2-R9 -u root
   19  clear
   20  pcs cluster auth node1-ha-lab-hpv2-R9 node2-ha-lab-hpv2-R9 node3-ha-lab-hpv2-R9 
   21  pcs cluster auth node1-ha-lab-hpv2-R9 node2-ha-lab-hpv2-R9 node3-ha-lab-hpv2-R9  -u hacluster  -p zxc123
   22  #pcs cluster auth node1-ha-lab-hpv2-R9 node2-ha-lab-hpv2-R9 node3-ha-lab-hpv2-R9  -u hacluster  -p zxc123
   23  pcs cluster auth node1-ha-lab-hpv2-R9 node2-ha-lab-hpv2-R9 node3-ha-lab-hpv2-R9  -u hacluster -p zxc123
   24  cat /etc/resolv.conf 
   25  ssh node2-ha-lab-hpv2-R9
   26  ssh node3-ha-lab-hpv2-R9
   27  systemctl enable pcsd.service; systemctl start pcsd.service
   28  passwd hacluster
   29  pcs host  auth node1-ha-lab-hpv2-R9 node2-ha-lab-hpv2-R9 node3-ha-lab-hpv2-R9  -u hacluster -p zxc123
   30  pcs cluster setup --start --name mycluster node1-ha-lab-hpv2-R9 node2-ha-lab-hpv2-R9 node3-ha-lab-hpv2-R9
   31  pcs cluster setup  mycluster node1-ha-lab-hpv2-R9 node2-ha-lab-hpv2-R9 node3-ha-lab-hpv2-R9
   32  pcs cluster status
   33  pcs cluster enable --all
   34  pcs cluster status
   35  pcs mycluster status
   36  pcs  status myclyster
   37  pcs  status
   38  pcs cluster status
   39  reboot
   40  history
   41  pcs mycluster status
   42  pcs cluster status
   43  history > history

